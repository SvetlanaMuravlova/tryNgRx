(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{YORG:function(e,t,i){"use strict";i.r(t),i.d(t,"GeneralWeatherModule",function(){return ee});var n=i("ofXK"),s=i("tk/3"),o=i("tyNb"),c=i("l7P3"),a=i("6eAF");const r="weather",b={date:(new Date).toString(),keys:["323903","324505","325343"],loading:!1},l=(e=b,t)=>{switch(t.type){case a.f.updateKeys:return Object.assign(Object.assign({},e),{keys:t.keys});case a.f.loaddedSuccessCondition:return Object.assign(Object.assign({},e),{generalLocations:p(e,t)});case a.f.loaddedSuccessLocation:return Object.assign(Object.assign({},e),{generalLocations:d(e,t)});case a.f.loading:return Object.assign(Object.assign({},e),{loading:t.value});case a.f.deleteLocation:return Object.assign(Object.assign({},e),{keys:(i=t.key,n=e.keys,h(n)?n.filter(e=>e!==i):n),generalLocations:u(t.key,e.generalLocations)});default:return e}var i,n};function d(e,t){return Object.assign(Object.assign({},e.generalLocations),{[t.payload.Key]:(i=t.payload,{Type:i.Type,LocalizedName:i.LocalizedName,Country:i.Country.LocalizedName,GeoPosition:{Longitude:i.GeoPosition.Longitude,Latitude:i.GeoPosition.Latitude}})});var i}function p(e,t){return Object.assign(Object.assign({},e.generalLocations),{[t.payload.key]:Object.assign(Object.assign({},e.generalLocations[t.payload.key]),{conditions:(i=t.payload.response,{WeatherIcon:i.WeatherIcon,WeatherText:i.WeatherText,Temperature:{Metric:{Value:i.Temperature.Metric.Value}},Wind:{Speed:{Metric:{Value:i.Wind.Speed.Metric.Value}}},LocalObservationDateTime:i.LocalObservationDateTime})})});var i}function u(e,t){if(!h(Object.keys(t)))return t;const i=Object.assign({},t);return delete i[e],i}function h(e){return e.length>3}const g=Object(c.p)(r),y=Object(c.q)(g,e=>e),m=Object(c.p)(r),f=Object(c.q)(m,e=>e.keys),O=Object(c.p)(r),L=Object(c.q)(O,e=>e.generalLocations),v=Object(c.p)(r),k=(Object(c.q)(v,e=>e.keys),Object(c.p)(r)),j=Object(c.q)(k,e=>e.loading);var M=i("1G5W"),G=i("XNiG"),N=i("fXoL"),_=i("H+bZ");let w=(()=>{class e{constructor(e){this.store$=e,this.KEY_FOR_GENERAL_LOCATIONS="GeneralWeatherLocations",this.checkSessionLocations()?this.initGeneralLocation(this.getGeneralLocations()):this.subscribeOnStoreGeneralLocations()}initGeneralLocation(e){this.keysGeneralLocation=e,this.saveGeneralLocations(),this.updateStoreWithGeneralKeys(),this.generalLocations$||this.subscribeOnStoreGeneralLocations()}addGeneralLocation(e){this.keysGeneralLocation.includes(e)||(this.keysGeneralLocation.push(e),this.updateStoreWithGeneralKeys())}subscribeOnStoreGeneralLocations(){this.generalLocations$=this.store$.pipe(Object(c.t)(f)).subscribe(e=>{e&&e.length&&(this.keysGeneralLocation=Object.assign([],e),this.checkStoreGeneralLocationsWithKeys(),this.saveGeneralLocations())})}updateStoreWithGeneralKeys(){this.store$.dispatch(Object(a.d)({keys:this.keysGeneralLocation}))}getGeneralLocationWithKey(e){this.setLoading(!0),this.store$.dispatch(Object(a.b)({key:e})),this.store$.dispatch(Object(a.a)({key:e}))}checkStoreGeneralLocationsWithKeys(){this.generalLocations$=this.store$.pipe(Object(c.t)(L)).subscribe(e=>{const t=this.keysGeneralLocation.find(t=>!(null==e?void 0:e[t]));t&&this.getGeneralLocationWithKey(t)})}saveGeneralLocations(){window.sessionStorage.setItem(this.KEY_FOR_GENERAL_LOCATIONS,JSON.stringify(this.keysGeneralLocation))}checkSessionLocations(){return!!window.sessionStorage.getItem(this.KEY_FOR_GENERAL_LOCATIONS)}getGeneralLocations(){return JSON.parse(window.sessionStorage.getItem(this.KEY_FOR_GENERAL_LOCATIONS))}setLoading(e){this.store$.dispatch(Object(a.c)({value:e}))}}return e.\u0275fac=function(t){return new(t||e)(N.Rb(c.i))},e.\u0275prov=N.Fb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var $=i("kVn3"),S=i("3Pt+"),x=i("7kUa");function C(e,t){if(1&e){const e=N.Ob();N.Nb(0,"div",6),N.Ub("click",function(){N.mc(e);const i=t.$implicit;return N.Xb(2).addAddresse(i)}),N.uc(1),N.Mb()}if(2&e){const e=t.$implicit;N.yb(1),N.yc(" ",e.Type,", ",e.LocalizedName,", ",e.Country.LocalizedName," ")}}function I(e,t){if(1&e&&(N.Nb(0,"div",4),N.sc(1,C,2,3,"div",5),N.Mb()),2&e){const e=N.Xb();N.yb(1),N.dc("ngForOf",e.items)}}let K=(()=>{class e{constructor(e,t,i){this.apiService=e,this.commonServ=t,this.apiCounts=i,this.placeHolder="pi pi-search",this.disabled=!1,this.items=[]}updateValue(){this.value&&this.value.length>4?this.apiService.getLocationByAutoComplete(this.value).subscribe(e=>{this.items=e,this.apiCounts.updateAmount()}):this.items=[]}addAddresse(e){this.value=`${e.Type}, ${e.LocalizedName}, ${e.Country.LocalizedName}`,this.commonServ.addGeneralLocation(e.Key),this.items=[]}}return e.\u0275fac=function(t){return new(t||e)(N.Jb(_.a),N.Jb(w),N.Jb($.a))},e.\u0275cmp=N.Db({type:e,selectors:[["app-auto-complete"]],inputs:{type:"type"},decls:7,vars:5,consts:[[1,"select__box",2,"width","100%"],[1,"p-input-icon-left"],["type","text","pInputText","",3,"disabled","ngModel","ngModelChange","keyup"],["class","select__items_box",4,"ngIf"],[1,"select__items_box"],["class","select__item",3,"click",4,"ngFor","ngForOf"],[1,"select__item",3,"click"]],template:function(e,t){1&e&&(N.Nb(0,"h2"),N.uc(1,"Add new location into your list"),N.Mb(),N.Nb(2,"div",0),N.Nb(3,"span",1),N.Kb(4,"i"),N.Nb(5,"input",2),N.Ub("ngModelChange",function(e){return t.value=e})("keyup",function(){return t.updateValue()}),N.Mb(),N.Mb(),N.sc(6,I,2,1,"div",3),N.Mb()),2&e&&(N.yb(4),N.Ab(t.placeHolder),N.yb(1),N.dc("disabled",t.disabled)("ngModel",t.value),N.yb(1),N.dc("ngIf",t.items&&t.items.length))},directives:[S.a,x.a,S.c,S.d,n.l,n.k],styles:[".select__items_box[_ngcontent-%COMP%]{background-color:#fff;padding:20px 0;box-shadow:4px 4px 8px 0 rgba(34,60,80,.2);border-radius:0 0 6px 6px}.select__item[_ngcontent-%COMP%]{cursor:pointer;padding:10px 20px;border-bottom:1px solid rgba(31,45,64,.14901960784313725)}.select__item[_ngcontent-%COMP%]:hover{background-color:rgba(31,45,64,.050980392156862744)}.select__item[_ngcontent-%COMP%]:last-child{border-bottom:none}"]}),e})();var T=i("QIUk"),W=i("7zfz"),D=i("jIHw");function E(e,t){if(1&e){const e=N.Ob();N.Nb(0,"p-button",7),N.Ub("click",function(){return N.mc(e),N.Xb(2).deleteLocation()}),N.Mb()}}const A=function(){return{width:"100%"}};function F(e,t){if(1&e&&(N.Nb(0,"div",1),N.Nb(1,"p-card",2),N.Nb(2,"div",3),N.Kb(3,"img",4),N.Nb(4,"p"),N.uc(5),N.Mb(),N.Mb(),N.Nb(6,"div",5),N.Nb(7,"p"),N.uc(8),N.Mb(),N.Nb(9,"p"),N.uc(10),N.Mb(),N.Mb(),N.sc(11,E,1,0,"ng-template",6),N.Mb(),N.Mb()),2&e){const e=N.Xb();N.yb(1),N.qc(N.ec(9,A)),N.dc("header",e.getTitleOfCard())("subheader",e.getDate()),N.yb(2),N.dc("src",e.initeImgUrl(e.item.conditions.WeatherIcon),N.oc),N.yb(2),N.vc(e.item.conditions.WeatherText),N.yb(3),N.wc("current t ",e.item.conditions.Temperature.Metric.Value," \xb0C"),N.yb(2),N.xc("Wind ",e.item.conditions.Wind.Speed.Metric.Value," ",e.item.conditions.Wind.Speed.Metric.Unit,"")}}let J=(()=>{class e{constructor(e,t){this.datePipe=e,this.store$=t}initeImgUrl(e){return`https://developer.accuweather.com/sites/default/files/${e<10?"0"+e:e}-s.png`}getTitleOfCard(){return`${this.item.Type} ${this.item.LocalizedName}, ${this.item.Country}`}getDate(){return this.datePipe.transform(this.item.LocalObservationDateTime,"EEEE, MMMM d, y")}deleteLocation(){this.store$.dispatch(Object(a.e)({key:this.key}))}}return e.\u0275fac=function(t){return new(t||e)(N.Jb(n.e),N.Jb(c.i))},e.\u0275cmp=N.Db({type:e,selectors:[["app-item-condition"]],inputs:{item:"item",key:"key"},features:[N.xb([n.e])],decls:1,vars:1,consts:[["class","item-box h-100",4,"ngIf"],[1,"item-box","h-100"],["styleClass","p-card-shadow",3,"header","subheader"],[1,"img_box"],["alt","Card",3,"src"],[1,"information_box"],["pTemplate","footer"],["label","Delete","icon","pi pi-trash","styleClass","p-button-secondary",3,"click"]],template:function(e,t){1&e&&N.sc(0,F,12,10,"div",0),2&e&&N.dc("ngIf",t.item&&t.item.conditions)},directives:[n.l,T.a,W.d,D.a],styles:[".item-box[_ngcontent-%COMP%]{border-radius:3px;box-shadow:4px 4px 8px 0 rgba(34,60,80,.2)}"]}),e})();var P=i("vKg+");let X=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=N.Db({type:e,selectors:[["app-loading-spinner"]],decls:2,vars:0,consts:[[1,"back_drop","w-100","h-100"]],template:function(e,t){1&e&&(N.Nb(0,"div",0),N.Kb(1,"p-progressSpinner"),N.Mb())},directives:[P.a],styles:[""]}),e})();function z(e,t){if(1&e&&N.Kb(0,"app-item-condition",9),2&e){const e=t.$implicit,i=N.Xb(3);N.dc("item",i.generalLocations[e])("key",e)}}function R(e,t){if(1&e&&(N.Nb(0,"div",7),N.sc(1,z,1,2,"app-item-condition",8),N.Mb()),2&e){const e=N.Xb(2);N.yb(1),N.dc("ngForOf",e.objectKeys(e.generalLocations))}}function Y(e,t){if(1&e&&(N.Nb(0,"div",2),N.Nb(1,"div",3),N.Nb(2,"h1"),N.uc(3,"Your honest weather guide "),N.Kb(4,"i",4),N.Mb(),N.Kb(5,"app-auto-complete",5),N.Nb(6,"h3"),N.uc(7,"Current conditions for your locations"),N.Mb(),N.Nb(8,"p"),N.uc(9),N.Yb(10,"date"),N.Mb(),N.sc(11,R,2,1,"div",6),N.Mb(),N.Mb()),2&e){const e=N.Xb();N.yb(5),N.dc("type",e.type),N.yb(4),N.wc("date: ",N.ac(10,3,e.state.date,"MMM d, y"),""),N.yb(2),N.dc("ngIf",e.generalLocations)}}function V(e,t){1&e&&N.Kb(0,"app-loading-spinner")}const U=[{path:"",pathMatch:"full",component:(()=>{class e{constructor(e,t,i){this.store$=e,this.apiService=t,this.generalServ=i,this.objectKeys=Object.keys,this.conditions$=this.store$.pipe(Object(c.t)(y)),this.generalLocations$=this.store$.pipe(Object(c.t)(L)),this.loading$=this.store$.pipe(Object(c.t)(j)),this.notDestroy$=new G.a,this.type="general",this.conditions$.pipe(Object(M.a)(this.notDestroy$)).subscribe(e=>{this.state=e}),this.generalLocations$.pipe(Object(M.a)(this.notDestroy$)).subscribe(e=>{this.generalLocations=e}),this.loading$.pipe(Object(M.a)(this.notDestroy$)).subscribe()}ngOnDestroy(){this.notDestroy$.complete()}}return e.\u0275fac=function(t){return new(t||e)(N.Jb(c.i),N.Jb(_.a),N.Jb(w))},e.\u0275cmp=N.Db({type:e,selectors:[["app-general"]],decls:4,vars:6,consts:[["class","container",4,"ngIf"],[4,"ngIf"],[1,"container"],[1,"row"],[1,"pi","pi-fw","pi-sun"],[3,"type"],["class","main row",4,"ngIf"],[1,"main","row"],["class","col-4 mb-3",3,"item","key",4,"ngFor","ngForOf"],[1,"col-4","mb-3",3,"item","key"]],template:function(e,t){1&e&&(N.sc(0,Y,12,6,"div",0),N.Yb(1,"async"),N.sc(2,V,1,0,"app-loading-spinner",1),N.Yb(3,"async")),2&e&&(N.dc("ngIf",N.Zb(1,2,t.conditions$)),N.yb(2),N.dc("ngIf",N.Zb(3,4,t.loading$)))},directives:[n.l,K,n.k,J,X],pipes:[n.b,n.e],styles:[""]}),e})()}];let q=(()=>{class e{}return e.\u0275mod=N.Hb({type:e}),e.\u0275inj=N.Gb({factory:function(t){return new(t||e)},imports:[[o.h.forChild(U)],o.h]}),e})();var H=i("Q4Mo"),Z=i("9jGm"),Q=i("13Yy"),B=i("FpXt");let ee=(()=>{class e{}return e.\u0275mod=N.Hb({type:e}),e.\u0275inj=N.Gb({factory:function(t){return new(t||e)},imports:[[n.c,q,c.k.forFeature(r,l),D.b,H.b,Z.b.forFeature([Q.a]),s.c,B.a]]}),e})()}}]);